"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/random";
exports.ids = ["pages/api/random"];
exports.modules = {

/***/ "flat-file-db":
/*!*******************************!*\
  !*** external "flat-file-db" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("flat-file-db");

/***/ }),

/***/ "fs-extra":
/*!***************************!*\
  !*** external "fs-extra" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("fs-extra");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("node-fetch");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frandom&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frandom.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frandom&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frandom.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/random.js */ \"(api)/./pages/api/random.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/random\",\n        pathname: \"/api/random\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_random_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJhbmRvbSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGcmFuZG9tLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2tEO0FBQ2xEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FtcGxlLXNlcnZlci8/ZDc2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3JhbmRvbS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JhbmRvbVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JhbmRvbVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frandom&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frandom.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUFFER_DIR: () => (/* binding */ BUFFER_DIR),\n/* harmony export */   getDB: () => (/* binding */ getDB),\n/* harmony export */   getPublicPath: () => (/* binding */ getPublicPath),\n/* harmony export */   initDB: () => (/* binding */ initDB)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var flat_file_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flat-file-db */ \"flat-file-db\");\n/* harmony import */ var flat_file_db__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(flat_file_db__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs-extra */ \"fs-extra\");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Set up paths\nconst DB_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"samples.db\");\nconst PUBLIC_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"public\");\nconst BUFFER_DIR = path__WEBPACK_IMPORTED_MODULE_0___default().join(PUBLIC_DIR, \"buffer\");\nlet db = null;\nlet isReady = false;\nfunction initDB() {\n    if (db) return Promise.resolve(db);\n    return new Promise((resolve, reject)=>{\n        // Ensure directories exist\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(PUBLIC_DIR);\n        fs_extra__WEBPACK_IMPORTED_MODULE_2___default().ensureDirSync(BUFFER_DIR);\n        console.log(\"Buffer directory created at:\", BUFFER_DIR);\n        db = flat_file_db__WEBPACK_IMPORTED_MODULE_1___default()(DB_PATH);\n        db.on(\"open\", ()=>{\n            console.log(\"Database loaded and ready\");\n            isReady = true;\n            // Log current database contents\n            const keys = db.keys();\n            console.log(`Database contains ${keys.length} samples:`, keys);\n            resolve(db);\n        });\n        db.on(\"error\", (err)=>{\n            console.error(\"Database error:\", err);\n            reject(err);\n        });\n    });\n}\n// Convert internal file path to public URL\nfunction getPublicPath(filePath) {\n    const relativePath = path__WEBPACK_IMPORTED_MODULE_0___default().relative(PUBLIC_DIR, filePath);\n    return \"/\" + relativePath.replace(/\\\\/g, \"/\");\n}\nfunction getDB() {\n    if (!isReady) {\n        throw new Error(\"Database not initialized. Call initDB() first.\");\n    }\n    return db;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNZO0FBQ1Y7QUFFMUIsZUFBZTtBQUNmLE1BQU1HLFVBQVVILGdEQUFTLENBQUNLLFFBQVFDLEdBQUcsSUFBSTtBQUN6QyxNQUFNQyxhQUFhUCxnREFBUyxDQUFDSyxRQUFRQyxHQUFHLElBQUk7QUFDNUMsTUFBTUUsYUFBYVIsZ0RBQVMsQ0FBQ08sWUFBWTtBQUV6QyxJQUFJRSxLQUFLO0FBQ1QsSUFBSUMsVUFBVTtBQUVQLFNBQVNDO0lBQ2QsSUFBSUYsSUFBSSxPQUFPRyxRQUFRQyxPQUFPLENBQUNKO0lBRS9CLE9BQU8sSUFBSUcsUUFBUSxDQUFDQyxTQUFTQztRQUMzQiwyQkFBMkI7UUFDM0JaLDZEQUFnQixDQUFDSztRQUNqQkwsNkRBQWdCLENBQUNNO1FBQ2pCUSxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDVDtRQUU1Q0MsS0FBS1IsbURBQVFBLENBQUNFO1FBRWRNLEdBQUdTLEVBQUUsQ0FBQyxRQUFRO1lBQ1pGLFFBQVFDLEdBQUcsQ0FBQztZQUNaUCxVQUFVO1lBRVYsZ0NBQWdDO1lBQ2hDLE1BQU1TLE9BQU9WLEdBQUdVLElBQUk7WUFDcEJILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtCQUFrQixFQUFFRSxLQUFLQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUVEO1lBRXpETixRQUFRSjtRQUNWO1FBRUFBLEdBQUdTLEVBQUUsQ0FBQyxTQUFTLENBQUNHO1lBQ2RMLFFBQVFNLEtBQUssQ0FBQyxtQkFBbUJEO1lBQ2pDUCxPQUFPTztRQUNUO0lBQ0Y7QUFDRjtBQUVBLDJDQUEyQztBQUNwQyxTQUFTRSxjQUFjQyxRQUFRO0lBQ3BDLE1BQU1DLGVBQWV6QixvREFBYSxDQUFDTyxZQUFZaUI7SUFDL0MsT0FBTyxNQUFNQyxhQUFhRSxPQUFPLENBQUMsT0FBTztBQUMzQztBQUVPLFNBQVNDO0lBQ2QsSUFBSSxDQUFDbEIsU0FBUztRQUNaLE1BQU0sSUFBSW1CLE1BQU07SUFDbEI7SUFDQSxPQUFPcEI7QUFDVDtBQUVzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NhbXBsZS1zZXJ2ZXIvLi9saWIvZGIuanM/M2RjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBmbGF0ZmlsZSBmcm9tICdmbGF0LWZpbGUtZGInO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcblxuLy8gU2V0IHVwIHBhdGhzXG5jb25zdCBEQl9QQVRIID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzYW1wbGVzLmRiJyk7XG5jb25zdCBQVUJMSUNfRElSID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnKTtcbmNvbnN0IEJVRkZFUl9ESVIgPSBwYXRoLmpvaW4oUFVCTElDX0RJUiwgJ2J1ZmZlcicpO1xuXG5sZXQgZGIgPSBudWxsO1xubGV0IGlzUmVhZHkgPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXREQigpIHtcbiAgaWYgKGRiKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRiKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vIEVuc3VyZSBkaXJlY3RvcmllcyBleGlzdFxuICAgIGZzLmVuc3VyZURpclN5bmMoUFVCTElDX0RJUik7XG4gICAgZnMuZW5zdXJlRGlyU3luYyhCVUZGRVJfRElSKTtcbiAgICBjb25zb2xlLmxvZygnQnVmZmVyIGRpcmVjdG9yeSBjcmVhdGVkIGF0OicsIEJVRkZFUl9ESVIpO1xuXG4gICAgZGIgPSBmbGF0ZmlsZShEQl9QQVRIKTtcblxuICAgIGRiLm9uKCdvcGVuJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGxvYWRlZCBhbmQgcmVhZHknKTtcbiAgICAgIGlzUmVhZHkgPSB0cnVlO1xuICAgICAgXG4gICAgICAvLyBMb2cgY3VycmVudCBkYXRhYmFzZSBjb250ZW50c1xuICAgICAgY29uc3Qga2V5cyA9IGRiLmtleXMoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBEYXRhYmFzZSBjb250YWlucyAke2tleXMubGVuZ3RofSBzYW1wbGVzOmAsIGtleXMpO1xuICAgICAgXG4gICAgICByZXNvbHZlKGRiKTtcbiAgICB9KTtcblxuICAgIGRiLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIENvbnZlcnQgaW50ZXJuYWwgZmlsZSBwYXRoIHRvIHB1YmxpYyBVUkxcbmV4cG9ydCBmdW5jdGlvbiBnZXRQdWJsaWNQYXRoKGZpbGVQYXRoKSB7XG4gIGNvbnN0IHJlbGF0aXZlUGF0aCA9IHBhdGgucmVsYXRpdmUoUFVCTElDX0RJUiwgZmlsZVBhdGgpO1xuICByZXR1cm4gJy8nICsgcmVsYXRpdmVQYXRoLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERCKCkge1xuICBpZiAoIWlzUmVhZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIG5vdCBpbml0aWFsaXplZC4gQ2FsbCBpbml0REIoKSBmaXJzdC4nKTtcbiAgfVxuICByZXR1cm4gZGI7XG59XG5cbmV4cG9ydCB7IEJVRkZFUl9ESVIgfTsiXSwibmFtZXMiOlsicGF0aCIsImZsYXRmaWxlIiwiZnMiLCJEQl9QQVRIIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJQVUJMSUNfRElSIiwiQlVGRkVSX0RJUiIsImRiIiwiaXNSZWFkeSIsImluaXREQiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZW5zdXJlRGlyU3luYyIsImNvbnNvbGUiLCJsb2ciLCJvbiIsImtleXMiLCJsZW5ndGgiLCJlcnIiLCJlcnJvciIsImdldFB1YmxpY1BhdGgiLCJmaWxlUGF0aCIsInJlbGF0aXZlUGF0aCIsInJlbGF0aXZlIiwicmVwbGFjZSIsImdldERCIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/db.js\n");

/***/ }),

/***/ "(api)/./pages/api/random.js":
/*!*****************************!*\
  !*** ./pages/api/random.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs-extra */ \"fs-extra\");\n/* harmony import */ var fs_extra__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_extra__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/db */ \"(api)/./lib/db.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([node_fetch__WEBPACK_IMPORTED_MODULE_0__]);\nnode_fetch__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Initialize database when module loads\nlet dbInitPromise = (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.initDB)();\nasync function getRandomSample() {\n    // Check for API key\n    if (false) {}\n    // Random tags for better sample discovery\n    const tags = [\n        \"field-recording\",\n        \"sound\",\n        \"effect\",\n        \"ambient\",\n        \"music\"\n    ];\n    const randomTag = tags[Math.floor(Math.random() * tags.length)];\n    console.log(\"Fetching with tag:\", randomTag);\n    try {\n        const response = await (0,node_fetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(`https://freesound.org/apiv2/search/text/?` + `query=${randomTag}&` + `page_size=1&` + `fields=id,name,previews&` + `token=${\"your_api_key_here\"}`, {\n            headers: {\n                \"Accept\": \"application/json\"\n            }\n        });\n        if (!response.ok) {\n            if (response.status === 401) {\n                throw new Error(\"Invalid Freesound API key. Please check your .env configuration.\");\n            }\n            throw new Error(`Freesound API error: ${response.status} ${response.statusText}`);\n        }\n        const data = await response.json();\n        console.log(\"Freesound API response:\", data);\n        if (!data.results || data.results.length === 0) {\n            console.log(\"No samples found, retrying with different tag...\");\n            return getRandomSample(); // Retry with different tag\n        }\n        return data.results[0];\n    } catch (error) {\n        console.error(\"Freesound API error:\", error.message);\n        throw error;\n    }\n}\nasync function downloadSample(preview, id) {\n    console.log(`Downloading sample ${id}...`);\n    const response = await (0,node_fetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(preview);\n    if (!response.ok) {\n        throw new Error(`Failed to download sample: ${response.status} ${response.statusText}`);\n    }\n    const buffer = await response.arrayBuffer();\n    const filePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(_lib_db__WEBPACK_IMPORTED_MODULE_3__.BUFFER_DIR, `${id}.mp3`);\n    console.log(`Writing to ${filePath}...`);\n    await fs_extra__WEBPACK_IMPORTED_MODULE_1___default().writeFile(filePath, Buffer.from(buffer));\n    // Save to database\n    const db = (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.getDB)();\n    const metadata = {\n        id,\n        path: filePath,\n        downloaded: new Date().toISOString()\n    };\n    db.put(id, metadata);\n    console.log(`Saved metadata to database:`, metadata);\n    return filePath;\n}\nasync function getRandomBufferSample() {\n    console.log(`Reading buffer directory: ${_lib_db__WEBPACK_IMPORTED_MODULE_3__.BUFFER_DIR}`);\n    const files = await fs_extra__WEBPACK_IMPORTED_MODULE_1___default().readdir(_lib_db__WEBPACK_IMPORTED_MODULE_3__.BUFFER_DIR);\n    if (files.length === 0) {\n        throw new Error(`No samples available in buffer. Use the Freesound API to download some samples first. \n    Make sure your FREESOUND_API_KEY is set in .env`);\n    }\n    const randomFile = files[Math.floor(Math.random() * files.length)];\n    const id = path__WEBPACK_IMPORTED_MODULE_2___default().basename(randomFile, \".mp3\");\n    console.log(`Selected random file: ${randomFile}`);\n    const db = (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.getDB)();\n    const sampleInfo = db.get(id);\n    if (!sampleInfo) {\n        console.error(`Database entry not found for sample ${id}`);\n        throw new Error(\"Sample metadata not found in database\");\n    }\n    return {\n        path: (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.getPublicPath)(sampleInfo.path),\n        id: sampleInfo.id\n    };\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"Random API called\");\n        // Wait for database to be ready\n        await dbInitPromise;\n        try {\n            // Try to fetch a new random sample\n            const sample = await getRandomSample();\n            const preview = sample.previews[\"preview-hq-mp3\"];\n            // Try to download and save the sample\n            const filePath = await downloadSample(preview, sample.id);\n            return res.status(200).json({\n                id: sample.id,\n                path: (0,_lib_db__WEBPACK_IMPORTED_MODULE_3__.getPublicPath)(filePath),\n                source: \"freesound\"\n            });\n        } catch (freesoundError) {\n            console.error(\"Freesound API or download error:\", freesoundError);\n            // If Freesound fails, try to get a random sample from buffer\n            try {\n                const bufferSample = await getRandomBufferSample();\n                return res.status(200).json({\n                    ...bufferSample,\n                    source: \"buffer\",\n                    fallbackReason: \"Freesound API failed\"\n                });\n            } catch (bufferError) {\n                // If both fail, return a helpful error\n                console.error(\"Buffer fallback error:\", bufferError);\n                return res.status(500).json({\n                    error: \"Could not get a sample\",\n                    details: `1. Freesound API: ${freesoundError.message}\n                   2. Buffer: ${bufferError.message}`,\n                    solution: \"Please set a valid FREESOUND_API_KEY in your .env file\"\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Unexpected error:\", error);\n        return res.status(500).json({\n            error: \"Server error\",\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT3VCLElBQUloQyxNQUFNLENBQUMsS0FBS0csSUFBSSxDQUFDO2dCQUMxQk0sSUFBSXlCLE9BQU96QixFQUFFO2dCQUNiL0IsTUFBTUksc0RBQWFBLENBQUM4QjtnQkFDcEJ3QixRQUFRO1lBQ1Y7UUFDRixFQUFFLE9BQU9DLGdCQUFnQjtZQUN2QjFDLFFBQVFVLEtBQUssQ0FBQyxvQ0FBb0NnQztZQUVsRCw2REFBNkQ7WUFDN0QsSUFBSTtnQkFDRixNQUFNQyxlQUFlLE1BQU1mO2dCQUMzQixPQUFPUyxJQUFJaEMsTUFBTSxDQUFDLEtBQUtHLElBQUksQ0FBQztvQkFDMUIsR0FBR21DLFlBQVk7b0JBQ2ZGLFFBQVE7b0JBQ1JHLGdCQUFnQjtnQkFDbEI7WUFDRixFQUFFLE9BQU9DLGFBQWE7Z0JBQ3BCLHVDQUF1QztnQkFDdkM3QyxRQUFRVSxLQUFLLENBQUMsMEJBQTBCbUM7Z0JBQ3hDLE9BQU9SLElBQUloQyxNQUFNLENBQUMsS0FBS0csSUFBSSxDQUFDO29CQUMxQkUsT0FBTztvQkFDUG9DLFNBQVMsQ0FBQyxrQkFBa0IsRUFBRUosZUFBZS9CLE9BQU8sQ0FBQzs4QkFDakMsRUFBRWtDLFlBQVlsQyxPQUFPLENBQUMsQ0FBQztvQkFDM0NvQyxVQUFVO2dCQUNaO1lBQ0Y7UUFDRjtJQUNGLEVBQUUsT0FBT3JDLE9BQU87UUFDZFYsUUFBUVUsS0FBSyxDQUFDLHFCQUFxQkE7UUFDbkMsT0FBTzJCLElBQUloQyxNQUFNLENBQUMsS0FBS0csSUFBSSxDQUFDO1lBQzFCRSxPQUFPO1lBQ1BvQyxTQUFTcEMsTUFBTUMsT0FBTztRQUN4QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYW1wbGUtc2VydmVyLy4vcGFnZXMvYXBpL3JhbmRvbS5qcz9mZTljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcbmltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGluaXREQiwgZ2V0REIsIEJVRkZFUl9ESVIsIGdldFB1YmxpY1BhdGggfSBmcm9tICcuLi8uLi9saWIvZGInO1xuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIHdoZW4gbW9kdWxlIGxvYWRzXG5sZXQgZGJJbml0UHJvbWlzZSA9IGluaXREQigpO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRSYW5kb21TYW1wbGUoKSB7XG4gIC8vIENoZWNrIGZvciBBUEkga2V5XG4gIGlmICghcHJvY2Vzcy5lbnYuRlJFRVNPVU5EX0FQSV9LRVkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnRnJlZXNvdW5kIEFQSSBrZXkgbm90IGZvdW5kLiBQbGVhc2Ugc2V0IEZSRUVTT1VORF9BUElfS0VZIGluIHlvdXIgLmVudiBmaWxlJ1xuICAgICk7XG4gIH1cblxuICAvLyBSYW5kb20gdGFncyBmb3IgYmV0dGVyIHNhbXBsZSBkaXNjb3ZlcnlcbiAgY29uc3QgdGFncyA9IFsnZmllbGQtcmVjb3JkaW5nJywgJ3NvdW5kJywgJ2VmZmVjdCcsICdhbWJpZW50JywgJ211c2ljJ107XG4gIGNvbnN0IHJhbmRvbVRhZyA9IHRhZ3NbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGFncy5sZW5ndGgpXTtcbiAgXG4gIGNvbnNvbGUubG9nKCdGZXRjaGluZyB3aXRoIHRhZzonLCByYW5kb21UYWcpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2ZyZWVzb3VuZC5vcmcvYXBpdjIvc2VhcmNoL3RleHQvP2AgKyBcbiAgICAgIGBxdWVyeT0ke3JhbmRvbVRhZ30mYCArXG4gICAgICBgcGFnZV9zaXplPTEmYCArXG4gICAgICBgZmllbGRzPWlkLG5hbWUscHJldmlld3MmYCArXG4gICAgICBgdG9rZW49JHtwcm9jZXNzLmVudi5GUkVFU09VTkRfQVBJX0tFWX1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBGcmVlc291bmQgQVBJIGtleS4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudiBjb25maWd1cmF0aW9uLicpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGcmVlc291bmQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5sb2coJ0ZyZWVzb3VuZCBBUEkgcmVzcG9uc2U6JywgZGF0YSk7XG5cbiAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCBkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gc2FtcGxlcyBmb3VuZCwgcmV0cnlpbmcgd2l0aCBkaWZmZXJlbnQgdGFnLi4uJyk7XG4gICAgICByZXR1cm4gZ2V0UmFuZG9tU2FtcGxlKCk7IC8vIFJldHJ5IHdpdGggZGlmZmVyZW50IHRhZ1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhLnJlc3VsdHNbMF07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRnJlZXNvdW5kIEFQSSBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBkb3dubG9hZFNhbXBsZShwcmV2aWV3LCBpZCkge1xuICBjb25zb2xlLmxvZyhgRG93bmxvYWRpbmcgc2FtcGxlICR7aWR9Li4uYCk7XG4gIFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByZXZpZXcpO1xuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZG93bmxvYWQgc2FtcGxlOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICB9XG5cbiAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oQlVGRkVSX0RJUiwgYCR7aWR9Lm1wM2ApO1xuICBcbiAgY29uc29sZS5sb2coYFdyaXRpbmcgdG8gJHtmaWxlUGF0aH0uLi5gKTtcbiAgYXdhaXQgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBCdWZmZXIuZnJvbShidWZmZXIpKTtcbiAgXG4gIC8vIFNhdmUgdG8gZGF0YWJhc2VcbiAgY29uc3QgZGIgPSBnZXREQigpO1xuICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICBpZCxcbiAgICBwYXRoOiBmaWxlUGF0aCxcbiAgICBkb3dubG9hZGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbiAgXG4gIGRiLnB1dChpZCwgbWV0YWRhdGEpO1xuICBjb25zb2xlLmxvZyhgU2F2ZWQgbWV0YWRhdGEgdG8gZGF0YWJhc2U6YCwgbWV0YWRhdGEpO1xuICBcbiAgcmV0dXJuIGZpbGVQYXRoO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSYW5kb21CdWZmZXJTYW1wbGUoKSB7XG4gIGNvbnNvbGUubG9nKGBSZWFkaW5nIGJ1ZmZlciBkaXJlY3Rvcnk6ICR7QlVGRkVSX0RJUn1gKTtcbiAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKEJVRkZFUl9ESVIpO1xuICBcbiAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm8gc2FtcGxlcyBhdmFpbGFibGUgaW4gYnVmZmVyLiBVc2UgdGhlIEZyZWVzb3VuZCBBUEkgdG8gZG93bmxvYWQgc29tZSBzYW1wbGVzIGZpcnN0LiBcbiAgICBNYWtlIHN1cmUgeW91ciBGUkVFU09VTkRfQVBJX0tFWSBpcyBzZXQgaW4gLmVudmApO1xuICB9XG4gIFxuICBjb25zdCByYW5kb21GaWxlID0gZmlsZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmlsZXMubGVuZ3RoKV07XG4gIGNvbnN0IGlkID0gcGF0aC5iYXNlbmFtZShyYW5kb21GaWxlLCAnLm1wMycpO1xuICBcbiAgY29uc29sZS5sb2coYFNlbGVjdGVkIHJhbmRvbSBmaWxlOiAke3JhbmRvbUZpbGV9YCk7XG4gIFxuICBjb25zdCBkYiA9IGdldERCKCk7XG4gIGNvbnN0IHNhbXBsZUluZm8gPSBkYi5nZXQoaWQpO1xuICBcbiAgaWYgKCFzYW1wbGVJbmZvKSB7XG4gICAgY29uc29sZS5lcnJvcihgRGF0YWJhc2UgZW50cnkgbm90IGZvdW5kIGZvciBzYW1wbGUgJHtpZH1gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NhbXBsZSBtZXRhZGF0YSBub3QgZm91bmQgaW4gZGF0YWJhc2UnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBwYXRoOiBnZXRQdWJsaWNQYXRoKHNhbXBsZUluZm8ucGF0aCksXG4gICAgaWQ6IHNhbXBsZUluZm8uaWRcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdSYW5kb20gQVBJIGNhbGxlZCcpO1xuICAgIFxuICAgIC8vIFdhaXQgZm9yIGRhdGFiYXNlIHRvIGJlIHJlYWR5XG4gICAgYXdhaXQgZGJJbml0UHJvbWlzZTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgdG8gZmV0Y2ggYSBuZXcgcmFuZG9tIHNhbXBsZVxuICAgICAgY29uc3Qgc2FtcGxlID0gYXdhaXQgZ2V0UmFuZG9tU2FtcGxlKCk7XG4gICAgICBjb25zdCBwcmV2aWV3ID0gc2FtcGxlLnByZXZpZXdzWydwcmV2aWV3LWhxLW1wMyddO1xuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZG93bmxvYWQgYW5kIHNhdmUgdGhlIHNhbXBsZVxuICAgICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCBkb3dubG9hZFNhbXBsZShwcmV2aWV3LCBzYW1wbGUuaWQpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgaWQ6IHNhbXBsZS5pZCxcbiAgICAgICAgcGF0aDogZ2V0UHVibGljUGF0aChmaWxlUGF0aCksXG4gICAgICAgIHNvdXJjZTogJ2ZyZWVzb3VuZCdcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGZyZWVzb3VuZEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGcmVlc291bmQgQVBJIG9yIGRvd25sb2FkIGVycm9yOicsIGZyZWVzb3VuZEVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSWYgRnJlZXNvdW5kIGZhaWxzLCB0cnkgdG8gZ2V0IGEgcmFuZG9tIHNhbXBsZSBmcm9tIGJ1ZmZlclxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYnVmZmVyU2FtcGxlID0gYXdhaXQgZ2V0UmFuZG9tQnVmZmVyU2FtcGxlKCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgLi4uYnVmZmVyU2FtcGxlLFxuICAgICAgICAgIHNvdXJjZTogJ2J1ZmZlcicsXG4gICAgICAgICAgZmFsbGJhY2tSZWFzb246ICdGcmVlc291bmQgQVBJIGZhaWxlZCdcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChidWZmZXJFcnJvcikge1xuICAgICAgICAvLyBJZiBib3RoIGZhaWwsIHJldHVybiBhIGhlbHBmdWwgZXJyb3JcbiAgICAgICAgY29uc29sZS5lcnJvcignQnVmZmVyIGZhbGxiYWNrIGVycm9yOicsIGJ1ZmZlckVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICdDb3VsZCBub3QgZ2V0IGEgc2FtcGxlJyxcbiAgICAgICAgICBkZXRhaWxzOiBgMS4gRnJlZXNvdW5kIEFQSTogJHtmcmVlc291bmRFcnJvci5tZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgIDIuIEJ1ZmZlcjogJHtidWZmZXJFcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgc29sdXRpb246ICdQbGVhc2Ugc2V0IGEgdmFsaWQgRlJFRVNPVU5EX0FQSV9LRVkgaW4geW91ciAuZW52IGZpbGUnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yJyxcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJmZXRjaCIsImZzIiwicGF0aCIsImluaXREQiIsImdldERCIiwiQlVGRkVSX0RJUiIsImdldFB1YmxpY1BhdGgiLCJkYkluaXRQcm9taXNlIiwiZ2V0UmFuZG9tU2FtcGxlIiwicHJvY2VzcyIsImVudiIsIkZSRUVTT1VORF9BUElfS0VZIiwiRXJyb3IiLCJ0YWdzIiwicmFuZG9tVGFnIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImRhdGEiLCJqc29uIiwicmVzdWx0cyIsImVycm9yIiwibWVzc2FnZSIsImRvd25sb2FkU2FtcGxlIiwicHJldmlldyIsImlkIiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJmaWxlUGF0aCIsImpvaW4iLCJ3cml0ZUZpbGUiLCJCdWZmZXIiLCJmcm9tIiwiZGIiLCJtZXRhZGF0YSIsImRvd25sb2FkZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwdXQiLCJnZXRSYW5kb21CdWZmZXJTYW1wbGUiLCJmaWxlcyIsInJlYWRkaXIiLCJyYW5kb21GaWxlIiwiYmFzZW5hbWUiLCJzYW1wbGVJbmZvIiwiZ2V0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNhbXBsZSIsInByZXZpZXdzIiwic291cmNlIiwiZnJlZXNvdW5kRXJyb3IiLCJidWZmZXJTYW1wbGUiLCJmYWxsYmFja1JlYXNvbiIsImJ1ZmZlckVycm9yIiwiZGV0YWlscyIsInNvbHV0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/random.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frandom&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frandom.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();